<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="../../alert/sweetalert.css" />
		<link rel="stylesheet" type="text/css" href="../../assets/css/layui.css" />
		<style type="text/css">
			*{
				margin: 0px;
				padding: 0px;
			}
		</style>
	</head>
	<body>
		
		<table class="layui-hide" lay-filter="demo" id="biaoge"></table>
		<script type="text/html" id="barDemo">
			<a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
			<a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
		</script>
		<script src="../../js/jquery-3.5.1-min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../alert/sweetalert-dev.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../assets/layui.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			layui.use('table', function() {
				var table = layui.table;
				
				table.render({
				    elem: '#biaoge',
					url:'http://127.0.0.1:8080/dzw_sys/api/Jurisdictions',
					cols: [[
						{fixed: 'left',type:'numbers', title: '序号', sort: true,width:100},
						{field:'jurisdictioncode', title: '员工编号'},
						{field:'jurisdictionname', title: '员工角色'},
						{fixed: 'right', title:'操作', toolbar: '#barDemo', width:150}
				    ]],
					page: true
				  });
				  
				  //监听工具条
				table.on('tool(demo)', function(obj){
					var data = obj.data;
					if(obj.event === 'detail'){
						layer.msg('ID：'+ data.id + ' 的查看操作');
					} else if(obj.event === 'del'){
						layer.confirm('真的删除行么', function(index){
							$.ajax({
								url:"http://127.0.0.1:8080/dzw_sys/api/Jurisdictions/"+data["jurisdictioncode"],
								typr:"get",
								dataType:"text",
								success:function(data){
									if(data === "1"){
										layer.msg("刪除成功");
										obj.del();
									}else{
										layer.msg("刪除失败");
									}
								}
							});
							
						});
					} else if(obj.event === 'edit'){
						layer.alert('编辑行：<br>'+ JSON.stringify(data))
					}
				});
			});
		</script>
	</body>
</html>
