<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<link rel="stylesheet" href="assets/css/layui.css">
		<link rel="stylesheet" href="assets/css/admin.css">
		<link rel="icon" href="/favicon.ico">
		<title>职工管理-职工列表-新增</title>
	</head>
	<style>
		.grid-demo-bg1 {
			background-color: whitesmoke;
			height: 60px;
			line-height: 60px;
		}
		
		.grid-demo-bg2 {
			background-color: #5FB878;
			height: 50px;
			line-height: 50px;
		}
		
		.grid-demo-bg3 {
			background-color: whitesmoke;
			height: 60px;
			line-height: 60px;
			border: 1px solid #D3D4D3;
		}
	</style>

	<body>
	  <form class="layui-form" action="">
		<div class="layui-row">
			<div class="layui-col-md12">
				<div class="grid-demo grid-demo-bg1"><span style="font-size: 18px;padding-left: 10px;">员工卡片</span></div>
			</div>
		</div>
		<div class="layui-row">&nbsp;</div>
		<div class="layui-row">
			<div class="layui-col-md5">&nbsp;</div>
			<div class="layui-col-md2">
				<h1>员工卡片</h1>
			</div>
			<div class="layui-col-md5">&nbsp;</div>
		</div>
		<div class="layui-row">&nbsp;</div>
		<div class="layui-row">
			<div class="layui-col-md1">&nbsp;</div>
			<div class="layui-col-md10">
				<div class="grid-demo grid-demo-bg2"><strong style="font-size: 15px;padding-left: 10px;">基本资料</strong></div>
			</div>
			<div class="layui-col-md1">&nbsp;</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>员工编号</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>员工姓名</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>性别</span>
				</div>
				<div class="layui-col-md2">
					<select id="sex" name="sex" lay-verify="">
						<option value="男">男</option>
						<option value="女">女</option>
					</select>
					<!--<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">-->
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>登录账号</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>登录密码</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>角色</span>
				</div>
				<div class="layui-col-md2">
					<select id="juese" name="juese" lay-verify="">
						<option value="">请选择</option>
					</select>
					<!--<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">-->
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>部门</span>
				</div>
				<div class="layui-col-md2">
					<select id="refusename" name="city" lay-verify="">
						<option value="">请选择</option>
					</select>
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span style="color: red;">*</span> <span>职位</span>
				</div>
				<div class="layui-col-md2">
					<select id="refusename2" name="city" lay-verify="">
						<option value="">请选择</option>
					</select>
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>学历</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>属性</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>毕业学校</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>专业</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>身份证号</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>户口地址</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>现居地址</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>员工电话</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>紧急电话</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>Email</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>出生日期</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" required lay-verify="required" placeholder="请输入标题" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				<div class="layui-col-md1">
					<span>入职时间</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" class="layui-input" id="test1">
				</div>
			</div>
		</div>
		<div class="layui-row">
			<div class="layui-col-md2">&nbsp;</div>
			<div class="grid-demo grid-demo-bg3">
				<div class="layui-col-md1">
					<span>离职时间</span>
				</div>
				<div class="layui-col-md2">
					<input type="text" name="title" class="layui-input" id="test2">
				</div>
				<div class="layui-col-md1">&nbsp;</div>
				
			</div>
			<div class="layui-col-md5">&nbsp;</div>
			<div class="layui-col-md2">
				<button type="button" class="layui-btn" id="yes">保存</button>
				<button type="button" class="layui-btn" id="no">取消</button>
			</div>
		</div>
	  </form>
	</body>
	<script src="assets/layui.js"></script>
	<script src="js/index.js"></script>
	<script src="js/home.js" type="text/javascript" charset="utf-8"></script>
	<script>
		layui.use(['laydate','form'], function() {
			var laydate = layui.laydate;
			var form = layui.form;
			//执行一个laydate实例
			laydate.render({
				elem: '#test1' //指定元素
			});
		});
		layui.use('laydate', function() {
			var laydate = layui.laydate;

			//执行一个laydate实例
			laydate.render({
				elem: '#test2'//指定元素
			});
		});
		layui.use(["jquery"],function(){
			var $=layui.jquery;
			$("#yes").click(function(){
				var obj={};
				obj["jurisdictionid"]=$("[name=juese]").val();
				obj["eno"]=$("[name=\"title\"]:eq(0)").val();
				obj["ename"]=$("[name=\"title\"]:eq(1)").val();
				if($("[name=sex]").val()=="女"){
					obj["esex"]=1;
				}else{
					obj["esex"]=2;
				}
				/*if($("[name=\"title\"]:eq(2)").val()=="女"){
					obj["esex"]=1;
				}else{
					obj["esex"]=2;
				}*/
				/*obj["esex"]=$("[name=\"title\"]:eq(2)").val();*/
				obj["eaccount"]=$("[name=\"title\"]:eq(3)").val();
				obj["epwd"]=$("[name=\"title\"]:eq(4)").val();
				obj["deid"]=$("#refusename option:selected").val();
				obj["stationid"]=$("#refusename2 option:selected").val();
				obj["eidentity"]=$("[name=\"title\"]:eq(10)").val();
				obj["eaddress"]=$("[name=\"title\"]:eq(12)").val();
				obj["ephone"]=$("[name=\"title\"]:eq(13)").val();
				obj["eemail"]=$("[name=\"title\"]:eq(15)").val();
				obj["einputDate"]=$("[name=\"title\"]:eq(17)").val();
				
				console.log(JSON.stringify(obj))
				$.post("http://127.0.0.1:8080/dzw_sys/api/wss/addEmpVo",{jsonStr:JSON.stringify(obj)},function(data){
					if(data){
						alert("新增成功");
						CloseWin();
					}else{
						alert("新增失败");
					}
				})
			});
			
			$.ajax({
				type: "get",
				dataType: 'json',
				url: "http://127.0.0.1:8080/dzw_sys/api/Jurisdictions/js",
				/*async:true*/
				success: function(data) {
					let str = "<option value=''>请选择</option>";
					for(let i of data) {
						str += `<option value='${i.jurisdictionid}'>${i.jurisdictionname}</option>`
					}
					$("#juese").html(str);
					form.render(); //重新渲染 固定写法
				}
			});
			
			$.ajax({
				type: "get",
				dataType: 'json',
				url: "http://127.0.0.1:8080/dzw_sys/api/wss/queryDepAll",
				/*async:true*/
				success: function(data) {
					let str = "<option value=''>请选择</option>";
					for(let i of data) {
						str += `<option value='${i.deid}'>${i.dename}</option>`
					}
					$("#refusename").html(str);
					form.render(); //重新渲染 固定写法
				}
			});
			
			$.ajax({
				type: "get",
				dataType: 'json',
				url: "http://127.0.0.1:8080/dzw_sys/api/wss/queryStationByAll",
				/*async:true*/
				success: function(data) {
					let str = "<option value=''>请选择</option>";
					for(let i of data) {
						str += `<option value='${i.stationid}'>${i.stationname}</option>`
					}
					$("#refusename2").html(str);
					form.render(); //重新渲染 固定写法
				}
			});
			
			function CloseWin() {
				parent.location.reload(); // 父页面刷新
				var index = parent.layer.getFrameIndex(window.name); //先得到当前iframe层的索引
				parent.layer.close(index); //再执行关闭 
			}
		})
	</script>

</html>